<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:pe="http://primefaces.org/ui/extensions"
	xmlns:p="http://primefaces.org/ui">
<h:head>
	<link rel="shortcut icon" href="#{resource['images/favicon.ico']}"/>
	<ui:insert name="title"/>
	<title>#{title ne null ? ('FSF-EIS - '.concat(title)):'FSF-EIS'}</title>
	
    <meta name="copyright"   content="&copy; Bangko Sentral ng Pilipinas"/>
    <meta name="description" content="FSCC-IS"/>
    <meta name="googlebot"   content="noarchive"/>
    <meta name="keywords"    content="FSCC-IS"/>
    <meta name="robots"      content="none"/>
    <meta http-equiv="cache-control"    content="no-cache, no-store, must-revalidate, private"/>
    <meta http-equiv="content-language" content="en-US"/>
    <meta http-equiv="content-type"     content="text/html; charset=UTF-8"/>
    <meta http-equiv="expires"          content="0"/>
    <meta http-equiv="pragma"           content="no-cache"/>  
    <meta http-equiv="X-Frame-Options"  content="SAMEORIGIN" />   
</h:head>
<h:body>
	<h:outputStylesheet library="css" name="#{authBean.cssFileName}" />
	<p:dialog appendTo="@(body)" header="An Unexpected Error Occured"
		widgetVar="errDialog" modal="true" resizable="false" closable="false">
		Click
		<a href="#{request.contextPath}/index.xhtml">here</a>
		to login again. If you continue to experience this problem, contact ASMD-ASG3 at local 2363
	</p:dialog>
	
	<p:outputPanel id="wrapper">
		<p:outputPanel id="heading">
			<table class="fsccisimg"
				style="width: 100%; height: 76px !important; overflow: auto;padding-top: 20px;">
				<tr>
					<td style="vertical-align: top;">
						<p:graphicImage
								styleClass="header_img" library="images" name="fscc_logo.png" />
					</td>
					<td style="text-align: right;height: 125px;">
						<div style="height: 76px;" class="welcomediv">
							<p:panel id="welcomepanel"
								styleClass="transparent noborder welcome"
								style="border:none;background:none;padding:0;height:25px;">
								<h:outputText styleClass="welcomeText"
									rendered="#{authBean.loggedIn}" value="Welcome #{authBean.name}" />
							</p:panel>
						</div>
					</td>
				</tr>
			</table>
		</p:outputPanel>
		
		<c:if test="#{empty param['sampleView']}">
			<p:panelGrid styleClass="navigationTable transparent_table">
				<p:row>
					<p:column>
						<p:menubar id="navigation" styleClass="transparent noborder">
							<p:menuitem value="Home" rendered="#{authBean.loggedIn and authBean.authenticated}"
								styleClass="#{request.requestURL.toString().contains('/index.xhtml') ? ' activeitem':''}"
								style="text-indent: 5px;" outcome="/index.xhtml">
							</p:menuitem>
							<p:menuitem value="Profile Account" rendered="#{authBean.loggedIn and authBean.authenticated}"
								styleClass="#{request.requestURL.toString().contains('/Account.xhtml') ? ' activeitem':''}"
								style="text-indent: 5px;"
								outcome="/views/User/Account.xhtml">
							</p:menuitem>
							<p:menuitem value="#{p:ifGranted('System Admin') ? 'Agency ':authBean.agencyGroup.agencyGroupShortname} Files"
								rendered="#{(p:ifGranted('System Admin') or p:ifGranted('Uploader')) and authBean.loggedIn and authBean.authenticated}" 
								styleClass="#{request.requestURL.toString().contains('/AgencyGroupFiles.xhtml') ? ' activeitem':''}"
								style="text-indent: 5px;" outcome="/views/Data/AgencyGroupFiles.xhtml">
							</p:menuitem>
							<p:menuitem value="File Permission" rendered="#{p:ifGranted('System Admin') and authBean.loggedIn and authBean.authenticated}"
								styleClass="#{request.requestURL.toString().contains('/RefFilePermission.xhtml') ? ' activeitem':''}"
								style="text-indent: 5px;"
								outcome="/views/Administrator/RefFilePermission.xhtml">
							</p:menuitem>
							<p:menuitem value="Shared Files"
								rendered="#{(p:ifGranted('Viewer')) and authBean.loggedIn and authBean.authenticated}" 
								styleClass="#{request.requestURL.toString().contains('/SharedFiles.xhtml') ? ' activeitem':''}"
								style="text-indent: 5px;" outcome="/views/Data/SharedFiles.xhtml">
							</p:menuitem>
							<p:menuitem value="User Management"
								rendered="#{p:ifGranted('System Admin') and authBean.loggedIn and authBean.authenticated}" 
								styleClass="#{request.requestURL.toString().contains('/Users.xhtml') ? ' activeitem':''}"
								style="text-indent: 5px;" outcome="/views/User/Users.xhtml">
							</p:menuitem>
							<p:menuitem value="Agency List" rendered="#{p:ifGranted('System Admin') and authBean.loggedIn and authBean.authenticated}"
								styleClass="#{request.requestURL.toString().contains('/RefAgency.xhtml') ? ' activeitem':''}"
								style="text-indent: 5px;"
								outcome="/views/Administrator/RefAgency.xhtml">
							</p:menuitem>
							<p:menuitem value="Audit Logs" style="text-indent: 5px;" rendered="#{p:ifGranted('System Admin') and authBean.loggedIn and authBean.authenticated}"
								styleClass="#{request.requestURL.toString().contains('/AuditLogs.xhtml') ? ' activeitem':''}"
								outcome="/views/Administrator/AuditLogs.xhtml">
							</p:menuitem>
							<p:menuitem value="Activity Calendar" rendered="#{authBean.loggedIn and authBean.authenticated}"
								styleClass="#{request.requestURL.toString().contains('/ActivityCalendar.xhtml') ? ' activeitem':''}"
								style="text-indent: 5px;"
								outcome="/views/User/ActivityCalendar.xhtml">
							</p:menuitem>
							<p:menuitem value="User Guide" rendered="#{authBean.loggedIn and authBean.authenticated}"
								styleClass="#{request.requestURL.toString().contains('/UserGuide.xhtml') ? ' activeitem':''}"
								style="text-indent: 5px;"
								outcome="/views/User/UserGuide.xhtml">
							</p:menuitem> 
						</p:menubar>
					</p:column>
					<p:column style="vertical-align: top;">
						<p:menubar styleClass="logoutmenubar transparent noborder">
							<p:menuitem value="Log Out" rendered="#{authBean.loggedIn}"
								style="margin-right:10px; color: #CFC; background-color: unset !important;"
								outcome="/logout.xhtml">
							</p:menuitem> 
						</p:menubar>
					</p:column>
				</p:row>
			</p:panelGrid>
		</c:if>
		<c:if test="#{not empty param['sampleView']}">
			<p:menubar id="navigation"/>
		</c:if>
		<p:outputPanel id="content">
			<div id='ieComp' class="ui-messages ui-widget"
				style='display: none;'>
				<div class="ui-messages-info ui-corner-all">
					<a class="ui-messages-close"
						onclick="$(this).parent().slideUp();return false;" href="#">
						<span class="ui-icon ui-icon-close"></span>
					</a> <span class="ui-messages-info-icon"></span>
					<ul>
						<li><span id='ieCompMsg' class="ui-messages-info-detail"></span></li>
					</ul>
				</div>
			</div>
			<div>
				<p:outputPanel id="output_content" styleClass="transparent noborder">

					<c:choose>
						<c:when test="#{authBean.sessionExistTag}">
							<ui:insert name="rightpane">
								<ui:include src="/blank.xhtml" />
							</ui:insert>
						</c:when>
						<c:when test="#{not authBean.loggedIn and (cookie['LtpaToken2'] ne null or cookie['FSFCOOKIE'] ne null)}">
							<p:outputPanel rendered="#{not authBean.loggedIn and (cookie['LtpaToken2'] ne null or cookie['FSFCOOKIE'] ne null)}">
							<p:outputLabel value="Page has expired. Redirecting... Click "/> <a href="${pageContext.request.contextPath}/logout.xhtml">here</a> if it's taking too long
							<h:outputScript>
								window.location = "#{request.contextPath}/PageExpired.jsp";
							</h:outputScript>
							</p:outputPanel>
						</c:when>
						<c:otherwise>
							<ui:insert name="rightpane">
								<ui:include src="/blank.xhtml" />
							</ui:insert>
						</c:otherwise>
					</c:choose>
				</p:outputPanel>
			</div>
			<p:outputPanel styleClass="compatibility-message" rendered="#{not authBean.isBrowserCompatible}">
				<h:outputText value="!&nbsp;" styleClass="noticeText"/>
				<h:outputText value="This system is best viewed in newer versions of Microsoft Internet Explorer. Update your browser to version 11 or higher." />
			</p:outputPanel>
				
			 <noscript>
			 	<p:outputPanel styleClass="compatibility-message">
					<h:outputText styleClass="ui-icon ui-icon-notice"/>
					<h:outputLabel value="This page requires Javascript. Please Enabled Javascript in your browser." />
				</p:outputPanel>
			 </noscript>
		</p:outputPanel>
		<p:outputPanel id="footer"></p:outputPanel>
	</p:outputPanel>
	 
	<p:ajaxStatus onstart="PF('statusDialog').show()"
		onerror="window.location.reload();"
		oncomplete="PF('statusDialog').hide()" />

	<p:dialog appendTo="@(body)" widgetVar="statusDialog" modal="true"
		draggable="false" closable="false" resizable="false"
		showHeader="false">
		<p:graphicImage library="images" name="ajaxloading.GIF" />
	</p:dialog>
	<p:idleMonitor timeout="#{authBean.sessionTimeoutInMilliseconds}"
		onidle="PF('idleDialog').show()"
		onactive="#{authBean.sessionTimeoutInMilliseconds}" />
	<p:dialog appendTo="@(body)" header="Page Expired"
		widgetVar="idleDialog" modal="true" resizable="false" closable="false">
		Click
		<a href="#{request.contextPath}/logout.xhtml">here</a>
		to reload the page.
	</p:dialog>
</h:body>
</html>